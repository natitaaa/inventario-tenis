<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inventario de tenis</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#fff1f3;
  padding:15px;
}

h1{
  text-align:center;
  color:#7a001f;
  font-family:"Times New Roman";
}

.sub{
  text-align:center;
  color:red;
  margin-bottom:20px;
}

.formulario, .tenis{
  background:white;
  padding:12px;
  border-radius:12px;
  margin-bottom:15px;
}

input, button{
  width:100%;
  margin:6px 0;
  padding:10px;
  border-radius:8px;
  border:1px solid #7a001f;
}

button{
  background:#7a001f;
  color:white;
  font-weight:bold;
}

.tenis img{
  width:110px;
  height:110px;
  object-fit:cover;
  border-radius:10px;
  display:block;
  margin-bottom:6px;
}

.vendido{
  background:#2e8b57;
  color:white;
  padding:6px;
  border-radius:8px;
  text-align:center;
  margin-top:6px;
}

.borrar{
  background:#ccc;
  color:black;
  font-size:12px;
}
</style>
</head>

<body>

<h1>ğ‘°ğ’ğ’—ğ’†ğ’ğ’•ğ’‚ğ’“ğ’Šğ’ ğ’…ğ’† ğ’•ğ’†ğ’ğ’Šğ’”</h1>
<div class="sub">ğ“£ğ“® ğ“ªğ“¶ğ“¸ ğ“¹ğ“ªğ“¹ğ“²</div>

<div class="formulario">
  <input id="nombre" placeholder="Marca o modelo">
  <input id="costo" type="number" placeholder="Costo">
  <input id="venta" type="number" placeholder="Precio de venta">
  <input id="foto" type="file" accept="image/*">
  <button onclick="guardar()">Guardar</button>
</div>

<div id="lista"></div>

<script>
let inventario = JSON.parse(localStorage.getItem("inventario")) || [];

function guardar(){
  const nombre = nombreInput.value;
  const costo = costoInput.value;
  const venta = ventaInput.value;
  const file = fotoInput.files[0];

  if(!nombre || !costo || !venta || !file){
    alert("Completa todo");
    return;
  }

  const img = new Image();
  const reader = new FileReader();

  reader.onload = e => {
    img.src = e.target.result;
  };

  img.onload = () => {
    const canvas = document.createElement("canvas");
    const size = 300; // ğŸ”¥ tamaÃ±o pequeÃ±o
    canvas.width = size;
    canvas.height = size;

    const ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0, size, size);

    const fotoComprimida = canvas.toDataURL("image/jpeg", 0.6);

    inventario.push({
      nombre,
      costo:Number(costo),
      venta:Number(venta),
      foto: fotoComprimida,
      vendido:false
    });

    localStorage.setItem("inventario", JSON.stringify(inventario));
    limpiar();
    mostrar();
  };

  reader.readAsDataURL(file);
}

function mostrar(){
  lista.innerHTML="";
  inventario.forEach((t,i)=>{
    lista.innerHTML += `
      <div class="tenis">
        <img src="${t.foto}">
        <b>${t.nombre}</b>
        <p>Costo: $${t.costo}</p>
        <p>Venta: $${t.venta}</p>
        ${t.vendido 
          ? `<div class="vendido">VENDIDO<br>Ganancia: $${t.venta - t.costo}</div>`
          : `<button onclick="vender(${i})">VENDIDO</button>`
        }
        <button class="borrar" onclick="borrar(${i})">Borrar</button>
      </div>`;
  });
}

function vender(i){
  inventario[i].vendido = true;
  guardarLS();
}

function borrar(i){
  inventario.splice(i,1);
  guardarLS();
}

function guardarLS(){
  localStorage.setItem("inventario", JSON.stringify(inventario));
  mostrar();
}

function limpiar(){
  nombreInput.value="";
  costoInput.value="";
  ventaInput.value="";
  fotoInput.value="";
}

const nombreInput = document.getElementById("nombre");
const costoInput = document.getElementById("costo");
const ventaInput = document.getElementById("venta");
const fotoInput = document.getElementById("foto");
const lista = document.getElementById("lista");

mostrar();
</script>

</body>
</html>

